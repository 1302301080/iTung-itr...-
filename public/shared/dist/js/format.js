define(function(require,exports,module){function a(a){a=a||{},b("[data-format^=price]",d,a),b("[data-format^=amount]",c,a),b("[data-format^=quantity]",e,a),b("[data-format^=percentage]",f,a),b("[data-format=side]",g,a),b("[data-format=status]",h,a),b("[data-format=product_type]",i,a),b("[data-format=currency]",j,a),b("[data-format=exchange]",k,a),b("[data-format^=-]",n,a)}function b(a,b,c){c=c||{};var d=c.container instanceof jQuery?c.container.find(a):$(a);d.each(function(){var a,d=$(this).text(),e=$(this).attr("data-format");0==e.indexOf("-")&&(a=e.substring(1));var f=e.indexOf("@"),g=f>0&&e.length>f?e.substring(f+1):0;d.length>0?$(this).text(b($.trim(d),a||Number(g))):(d=$(this).val(),d.length>0&&$(this).val(b($.trim(d),a||Number(g)))),c&&c.once&&$(this).removeAttr("data-format")})}function c(a,b){return p.amount?n(a,p.amount):(a=ReplaceComma(a),isNaN(a)?o:"undefined"==typeof $.number?a:$.number(a,b||2))}function d(a,b){return p.price?n(a,p.price):isNaN(b)?n(a,b):(a=ReplaceComma(a),isNaN(a)?o:"undefined"==typeof $.number?a:(b=b||3,$.number(a,b)))}function e(a,b){return p.quantity?n(a,p.quantity):(a=ReplaceComma(a),isNaN(a)?o:"undefined"==typeof $.number?a:a%1===0?$.number(a):$.number(a,b||2))}function f(a,b){if("string"==typeof a&&a.indexOf("%")===a.length-1&&(a=a.replace(/%/g,""),isNaN(a)||(a=String(a/100))),a=ReplaceComma(a),isNaN(a))return o;if(p.percentage){var c=n(100*a,p.percentage);return c&&c!=o?c+"%":c}return"undefined"==typeof $.number?a:isNaN(Number(a))?a:(b=b||0,$.number(100*Number(a),b)+"%")}function g(a){var b=messages.oms["side_"+a];return b||a}function h(a){var b=messages.oms["status_"+a];return b||a}function i(a){var b=messages.oms["product_type_"+a];return b||a}function j(a){return a}function k(a){return a?messages.oms["exchange_"+a.toLowerCase()]||(messages[a]?messages[a].text:a):a}function l(a){return a?messages.oms["source_"+a]||a:a}function m(a){for(var b in a)if(q[b])for(var c=0;c<q[b].length;c++){var d=q[b][c];d.keys.indexOf(a[b])>=0&&(a[b]=d.value)}else null==a[b]&&(a[b]=o);return a}function n(a,b){var c;if(c="string"==typeof a?a.replace(/,/g,""):a,isNaN(c))return isNaN(o)?o:n(o,b);var d=b?b.split("."):[""],e=0;d.length>0&&(e=d[d.length-1].length);for(var f=c?Number(Number(c).toFixed(e)).toString().split("."):["0"],g="",h=f[0],i=d[0],j=h.length-1,k=!1,l=i.length-1;l>=0;l--)switch(i.substr(l,1)){case"#":j>=0&&(g=h.substr(j--,1)+g);break;case"0":g=j>=0?h.substr(j--,1)+g:"0"+g;break;case",":k=!0,g=","+g}if(j>=0)if(k)for(var m=h.length;j>=0;j--)g=h.substr(j,1)+g,j>0&&(m-j)%3==0&&(g=","+g);else g=h.substr(0,j+1)+g;g+=".",h=f.length>1?f[1]:"",i=d.length>1?d[1]:"",j=0;for(var l=0;l<i.length;l++)switch(i.substr(l,1)){case"#":j<h.length&&(g+=h.substr(j++,1));break;case"0":g+=j<h.length?h.substr(j++,1):"0"}return g.replace(/^,+/,"").replace(/^-,/,"-").replace(/\.$/,"")}var o=messages&&messages.NotApplicableValue?messages.NotApplicableValue.text||"N/A":"N/A",p="undefined"==typeof initial_data?{}:initial_data.format||{};$(function(){$.fn.format=function(){a({container:$(this)})},$.extend({_setDefault:m,_map:{side:g,status:h,productType:i,currency:j,exchange:k,source:l},_format:{price:d,amount:c,quantity:e,percentage:f,pattern:n},_notApplicabel:o})});var q={bodQuantity:[{keys:[null,""],value:0}],costPrice:[{keys:[null,""],value:0}],marketValue:[{keys:[null,""],value:0}],globalMarketValue:[{keys:[null,""],value:0}],acceptValue:[{keys:[null,""],value:0}],unrealizedPL:[{keys:[null,""],value:0}],unrealizedPLRatio:[{keys:[null,""],value:0}],marginRatio:[{keys:[null,""],value:0}],totalBuy:[{keys:[null,""],value:0}],totalSell:[{keys:[null,""],value:0}],totalNet:[{keys:[null,""],value:0}],queueQuantity:[{keys:[null,""],value:0}]};exports.formatWithPattern=n});