define(function(require,exports,module){function a(a){a=a||{},b("[data-format^=price]",d,a),b("[data-format^=amount]",c,a),b("[data-format^=quantity]",e,a),b("[data-format^=percentage]",f,a),b("[data-format=side]",g,a),b("[data-format=status]",h,a),b("[data-format=product_type]",i,a),b("[data-format=currency]",j,a),b("[data-format=exchange]",k,a),b("[data-format^=-]",n,a)}function b(a,b,c){c=c||{};var d=c.container instanceof jQuery?c.container.find(a):$(a);d.each(function(){var a,d=$(this).text(),e=$(this).attr("data-format");0==e.indexOf("-")&&(a=e.substring(1));var f=e.indexOf("@"),g=f>0&&e.length>f?e.substring(f+1):0;d.length>0?$(this).text(b($.trim(d),a||Number(g))):(d=$(this).val(),d.length>0&&$(this).val(b($.trim(d),a||Number(g)))),c&&c.once&&$(this).removeAttr("data-format")})}function c(a,b){return a==Number.NaN||a==o?o:"undefined"==typeof $.number||isNaN(a)?a:$.number(a,b||2)}function d(a,b){return a==Number.NaN||a==o?o:"undefined"==typeof $.number||isNaN(a)?a:(b=b||3,$.number(a,b))}function e(a,b){return a==Number.NaN||a==o?o:"undefined"==typeof $.number||isNaN(a)?a:a%1===0?$.number(a):$.number(a,b||2)}function f(a,b){return a==Number.NaN||a==o?o:"undefined"==typeof $.number||isNaN(a)?a:isNaN(Number(a))?a:(b=b||0,$.number(100*Number(a),b)+"%")}function g(a){var b=messages.oms["side_"+a];return b||a}function h(a){var b=messages.oms["status_"+a];return b||a}function i(a){var b=messages.oms["product_type_"+a];return b||a}function j(a){return a}function k(a){return a?messages.oms["exchange_"+a.toLowerCase()]||(messages[a]?messages[a].text:a):a}function l(a){return a?messages.oms["source_"+a]||a:a}function m(a){for(var b in a)if(p[b])for(var c=0;c<p[b].length;c++){var d=p[b][c];d.keys.indexOf(a[b])>=0&&(a[b]=d.value)}else null==a[b]&&(a[b]=o);return a}function n(a,b){for(var c=a?a.toString().split("."):["0"],d=b?b.split("."):[""],e="",f=c[0],g=d[0],h=f.length-1,i=!1,j=g.length-1;j>=0;j--)switch(g.substr(j,1)){case"#":h>=0&&(e=f.substr(h--,1)+e);break;case"0":e=h>=0?f.substr(h--,1)+e:"0"+e;break;case",":i=!0,e=","+e}if(h>=0)if(i)for(var k=f.length;h>=0;h--)e=f.substr(h,1)+e,h>0&&(k-h)%3==0&&(e=","+e);else e=f.substr(0,h+1)+e;e+=".",f=c.length>1?c[1]:"",g=d.length>1?d[1]:"",h=0;for(var j=0;j<g.length;j++)switch(g.substr(j,1)){case"#":h<f.length&&(e+=f.substr(h++,1));break;case"0":e+=h<f.length?f.substr(h++,1):"0"}return e.replace(/^,+/,"").replace(/\.$/,"")}var o=messages&&messages.NotApplicableValue?messages.NotApplicableValue.text||"N/A":"N/A";$(function(){$.fn.format=function(){a({container:$(this)})},$.extend({_setDefault:m,_map:{side:g,status:h,productType:i,currency:j,exchange:k,source:l},_format:{price:d,amount:c,quantity:e,percentage:f},_notApplicabel:o})});var p={bodQuantity:[{keys:[null,""],value:0}],costPrice:[{keys:[null,""],value:0}],marketValue:[{keys:[null,""],value:0}],globalMarketValue:[{keys:[null,""],value:0}],acceptValue:[{keys:[null,""],value:0}],unrealizedPL:[{keys:[null,""],value:0}],unrealizedPLRatio:[{keys:[null,""],value:0}],marginRatio:[{keys:[null,""],value:0}],totalBuy:[{keys:[null,""],value:0}],totalSell:[{keys:[null,""],value:0}],totalNet:[{keys:[null,""],value:0}],queueQuantity:[{keys:[null,""],value:0}]};exports.formatWithPattern=n});