function openLayer(){$.get("/iTrader/panel/ticket",function(a){layer.open({type:1,title:messages.ticket_title.text,area:["420px","400px"],shade:0,maxmin:!0,offset:[170,20],content:a,zIndex:10,success:function(a,b){$("#ticket-panel .panel-heading").remove(),setTimeout(function(){layer.min(b),OrderTicket_Initialize(),translate()},500)}})})}function GetMaxBuy(a,b){var c=0;if(a&&b){var d=AccountMgr.get(current.account,null),e=ProductMgr.get(a);if(d&&e){var f=d[initial_data.tradingLimit]||0,g=ProductMgr.getLotSize(a)||0;if(f&&g){var h=CurrencyMgr.get(e[tags.currency]);h&&h.ratio&&(f/=h.ratio,c=Math.floor(f/b/g)*g)}}}return c>=0?c:0}function GetMaxSell(a){var b=0,c=PositionMgr.get({symbol:a,account:current.account});return c&&c.length>0&&(b=c[0][tags.quantity]-c[0].queueQuantity),b>=0?b:0}$(function(){initialize(function(a){a||(SocketIO_Initialize(),translate(),openLayer())})});