function GetOptions(a){var b=initial_data.ordConst,c="";if(a){var d=a[tags.instruct];a[tags.instruct1],a[tags.instruct2],a[tags.instruct3],a[tags.instruct4];if(0!==(d&b.omsOrderMarket)&&(c+=messages.oms.order_type_market+";"),0!==(d&b.omsOrderPreOpen)&&(c+=0==Number(a[3])?messages.oms.order_type_auction+";":messages.oms.order_type_auctionLimit+";"),0!==(d&b.omsOrderEnhancedLimit)&&(c+=messages.oms.order_type_enhancedLimit+";"),0!==(d&b.omsOrderStopLimit)){var e=getDisplayPrice(a[41],"order",a);c+="{0} [{1}:{2}];".format(messages.oms.order_type_stopLimit,messages.ticket_stop_price.text,e)}0!==(d&b.omsOrderFAK)&&(c+=messages.oms.order_tif_fak+";"),0!==(d&b.omsOrderFOK)&&(c+=messages.oms.order_tif_fok+";"),0!==(d&b.omsOrderGTC)&&(c+=a[tags.expirationDate]?"{0} [{1}];".format(messages.oms.order_tif_gtd,a[tags.expirationDate]):messages.oms.order_tif_gtc+";"),(a.transFee||0==a.transFee)&&(c+="{0}{1};".format("TRANSFEE: ",$._format.percentage(a.transFee,2)))}return c}function IsOTCFund(a){if(a&&10==a[22]&&1==a[1508])return!0}function IsOTCBond(a){if(a&&6==a[22]&&1==a[1508])return!0}function GetMaxBuy(a,b,c){var d=0,e={};a&&b?ProductMgr.get(a,function(a){if(!a)return c(0);var f=a[tags.currency]||CurrencyMgr.base_currency,g=CurrencyMgr.currencyMode;if(g){var h=CurrencyMgr.currency_list;if(h)for(var i=0;i<h.length;i++)if(h[i].currency==f){var j=h[i].isConvertible;e=j?AccountMgr.get(current.account,null):AccountMgr.get(current.account,f)}}else e=AccountMgr.get(current.account,null);if(e&&a){var k=e[initial_data.keyTags.tradingLimit]||0;initial_data.bankBalanceMode&&(k=e.netAssetValue);var l=a[24]||0;if(k&&l){var m=CurrencyMgr.get(a[tags.currency]);m&&m.ratio&&(k/=m.ratio,d=Math.floor(k/b/l)*l)}}return c(d>=0?d:0)}):c(0)}function GetMaxSellSync(a){if(a){var b=0,c=PositionMgr.get({symbol:a,account:current.account});return c&&c.length>0&&(b=c[0][tags.quantity]-(c[0].queueQuantity||0),ExchangeMgr.exchange_isDayTrade&&ExchangeMgr.exchange_isDayTrade[c[0][20]]&&(b-=c[0].todayBuyQuantity)),b>=0?b:0}}function IsOutstandingStatus(a){if(1==a||2==a||100==a||8==a)return!0}function IsMarginAccount(a){return"undefined"==typeof AccountMgr||!(a&&AccountMgr&&AccountMgr.account_info_list&&AccountMgr.account_info_list[a]&&0==AccountMgr.account_info_list[a].margin_type)}