define(function(require,exports,module){function a(){if(!e){e=$("<div>",{"class":"row"});for(var a=$("<form>",{"class":"form-horizontal has-success",id:"account-summary-overall"}),b=0;b<h.length;b++){var c=h[b],f=c.key.toString();if(!(i.indexOf(f)>=0)){var g=c.i18n||"account_summary_header_"+f,j=$("<div>",{"class":"col-md-4 form-group form-group-sm"}).append($("<label>",{"class":"col-sm-5 control-label","data-i18n":g})).append($("<div>",{"class":"col-sm-7"}).append($("<input>",{"class":"form-control text-right",id:"account-summary-overall-"+f,readonly:!0,"data-format":c.format})));a.append(j)}}e.append(a),d.prepend($("<legend>")),d.prepend(e),d.translate()}}function b(){g.updateAcctInfo();for(var a=c(),b=!1,d=!1,f=0;f<g.account_balance_list.length;f++){var h=g.account_balance_list[f];if(h.account&&h.data&&!h.currency){b||isNaN(h.data.marketValue)||(b=!0),d||isNaN(h.data.acceptValue)||(d=!0);for(var i in a)a[i]+=h.data[i]||0}}b||(a.marketValue=Number.NaN),d||(a.acceptValue=Number.NaN);for(var i in a){var j=$("#account-summary-overall-"+i);j.length>0&&$(j[0]).val(a[i])}e.format()}function c(){if(h&&!(h.length<=0)){for(var a={},b=0;b<h.length;b++){var c=h[b].key.toString();"interestAccrualWithDate"!==c?a[c]=0:a[c]=""}return a}}var d,e,f,g,h=[],i=["10","23","exchangeRatio"],j=!0;exports.init=function(c,e,i){d=c,f=e,g=i,d&&d instanceof jQuery&&(!f||f.overall&&f.overall.enable===!1||i&&(h=f.overall&&f.overall.schema?f.overall.schema:0==f.account.enable&&1==f.cashview.enable?f.cashview.schema:f.account.schema,a(),AccountMgr.on(function(){j=!0}),PositionMgr.on(function(){j=!0}),setInterval(function(){j&&(b(),j=!1)},1e3)))}});