function SearchProduct_Initialize(){search_product_panel=$("#search-product-panel"),search_product_panel.length<=0||(search_product_table=$("#search-product-table"),SearchProductDt_Initialize(),$("#search-product-btn").click(function(){search_product_datatable.ajax.reload()}),$("#search-product-exchange,#search-product-product").change(function(){search_product_datatable.ajax.reload()}),search_product_panel.format(),search_product_panel.translate())}function SearchProduct_KeyPress(a){return 13!=a.keyCode||(a.cancelBubble=!0,a.returnValue=!1,search_product_datatable&&search_product_datatable.ajax.reload(),!1)}function SearchProductDt_Initialize(){search_product_datatable=search_product_table.CreateDatatable({columnSchema:initial_data.views.search_product.schema,columnHeaderPrefix:"search_product_header_",serverSide:!0,processing:!0,searching:!1,lengthChange:!1,order:[],dom:'tr<"col-sm-12 text-center"ip>',columnDefs:[{className:"copyprice",targets:[0]},{className:"showTooltip",targets:[1]}],ajax:{type:"post",url:"/iTrader/product/search",data:function(a){for(var b=$("#search-product-form").serializeArray(),c={},d=0;d<b.length;d++)c[b[d].name]=b[d].value;return $.extend({},a,c)},cache:!1,dataType:"json"}}),search_product_datatable.on("draw.dt",function(){for(var a=search_product_datatable.rows()[0],b=0;b<a.length;b++){var c=search_product_datatable.row(b);search_product_datatable.HandleDataColumns(search_product_datatable,c,{columnSchema:initial_data.views.search_product.schema})}search_product_panel.find(".copyprice").click(function(){SearchProduct_Select($(this).text())}),search_product_panel.find(".showTooltip").each(function(){$(this).attr("title",$(this).text())}),search_product_panel.find("#search-product-table_paginate").css("text-align","center"),search_product_panel.format(),search_product_panel.translate()})}function SearchProduct_Select(a){for(var b,c=search_product_datatable.data(),d=0;d<c.length;d++)if(c[d][tags.symbol]===a){b={symbol:a,exchange:c[d][tags.exchange]};break}b&&(b.name="copy-symbol",window.opener&&"function"==typeof window.opener.postMessage?(window.opener.postMessage(b,"/"),window.close()):(window.postMessage(b,"/"),search_product_dialog&&(search_product_dialog.close(),search_product_dialog=null)))}function SearchProduct_Search(a,b,c){var d=c?c.type:"";showMessage({title:messages.search_product_title.text,load:{url:"/iTrader/product/search?action=popup&productType="+(b||"")+"&exchanges="+(a||"")+"&type="+d,callback:function(a){search_product_dialog=a,SearchProduct_Initialize()}}})}var search_product_panel,search_product_table,search_product_datatable,search_product_dialog;