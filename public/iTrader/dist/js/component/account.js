function AccountBalance_Initialize(){if(account_balance_panel=$("#account-panel"),account_currency_dropdown=$("#account-currency-dropdown-group"),!(account_balance_panel.length<=0)){for(var a=initial_data.views.trade.account_balance.schema,b=0;b<a.length;b++){var c=a[b].key,d=a[b].i18n||"account_balance_header_"+c;$("#account-banlance-ul").append("<li class='list-group-item'><b data-i18n='"+d+"'></b><span class='pull-right text-danger account_balance_list' data-format='amount' data-tag='"+c+"'></span></li>")}$("#nav_account").on("change",function(a,b){AccountBalance_Update()}),$(document).on("account-update",function(a,b){AccountBalance_Update(),AccountCurrencyDropdownGroup_Reset()}),$(document).on("currency",function(a,b){current.currency=CurrencyMgr.base_currency,AccountCurrencyDropdownGroup_Reset()}),account_currency_dropdown.on("change",function(a,b){current.currency=b,AccountBalance_Update()})}}function AccountBalance_Update(){var a=AccountMgr.get(current.account,current.currency),b=0;$(".account_balance_list").each(function(){var c=$(this).attr("data-tag");a&&a[c]?$(this).text(a[c]):$(this).text(0),b++}),account_balance_panel.format()}function AccountCurrencyDropdownGroup_Reset(){var a={name:{i18n:"column_currency",value:"currency"},data:[]};if(current.currency&&a.data.push({key:current.currency,value:current.currency}),"multi"===CurrencyMgr.currencyMode){if(!AccountMgr.account_balance_list)return;for(var b=0;b<AccountMgr.account_balance_list.length;b++){var c=AccountMgr.account_balance_list[b];if(c.account==AccountMgr.current_account&&c.currency){var d=c.currency,e=_.findIndex(a.data,function(a){return a.key==d});if(e>=0)continue;a.data.push({key:d,value:d})}}}else for(var b=0;b<CurrencyMgr.currency_list.length;b++){var f=CurrencyMgr.currency_list[b].currency,e=_.findIndex(a.data,function(a){return a.key==f});e>=0||a.data.push({key:f,value:f})}account_currency_dropdown.CreateDrowdownGroup(a)}var account_balance_panel,account_currency_dropdown;