function Price_SubscribeProduct(){var a=$("#price-symbol-code").val();a!==price_lastSymbol&&(price_lastSymbol&&GetProduct(price_lastSymbol,{flag:-1}),price_lastSymbol=a,Price_Update(),GetProduct(a,{flag:1},function(a){return!(!a||a[tags.symbol]!==$("#price-symbol-code").val())&&void Price_Update(a)}))}function PriceSymbol_KeyPress(a){return 13!=a.keyCode||(a.cancelBubble=!0,a.returnValue=!1,Price_SubscribeProduct(),!1)}function Price_Update(a){if(price_panel&&!(price_panel.length<=0)){var b=initial_data.views.trade.price.exchanges,c=$("#price-symbol-code").val();a&&c===a[tags.symbol]&&b.indexOf(a[tags.exchange])>=0?(price_productObj=a,$("#price-update-time").text(moment().format("MM/DD/YYYY HH:mm:ss")),price_panel.find("[data-tag]").each(function(){$(this).text(a[$(this).attr("data-tag")]||"--"),"symbolName"===$(this).attr("data-tag")&&$(this).attr("title",a[$(this).attr("data-tag")]||"")}),price_panel.format(),price_panel.find("[data-format=price]").each(function(){$(this).text(getDisplayPrice($(this).text(),"market",a))})):Price_Reset()}}function Price_Reset(){price_productObj=null,$("#price-update-time").text("--"),price_panel.find("[data-tag]").each(function(){"symbolName"===$(this).attr("data-tag")?($(this).text(messages.ticket_message_invalid_symbol.text),$(this).attr("title","")):$(this).text("--")})}var price_panel,price_productObj,price_lastSymbol;$(document).on("initialized",function(){price_panel=$("#price-panel"),Price_Update({}),$(".copyprice").click(function(){if(price_productObj){var a={name:"copy-symbol",exchange:price_productObj[tags.exchange],symbol:price_productObj[tags.symbol],price:$(this).find("[data-format=price]").text()};window.postMessage(a,"/")}}),$("#price-refresh").click(function(){var a=$("#price-symbol-code").val();a?(refresh("product",[a]),price_productObj&&$("#price-update-time").text(moment().format("MM/DD/YYYY HH:mm:ss"))):Price_Reset()})}),$(document).on("ticket-added",function(a,b){$("#price-symbol-code").val(b[tags.symbol]),Price_SubscribeProduct()}),$(document).on("products",function(a,b){if(b&&b.products)for(var c=0;c<b.products.length;c++)b.products[c][tags.symbol]===$("#price-symbol-code").val()&&Price_Update(b.products[c])});