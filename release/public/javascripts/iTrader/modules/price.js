define(function(require,exports,module){function a(a){if(e=a,e&&!(e.length<=0)){f=$("#price-symbol-code"),b(),$(".copyprice").click(function(){if(d){var a=$(this).find("[data-format=price]").text();isNaN(a)&&(a=0);var b={name:"copy-symbol",exchange:d[20],symbol:d[0],price:a};window.postMessage(b,"/")}}),$("#price-refresh").click(function(){b()}),f.keypress(function(a){return 13!=a.keyCode||(a.cancelBubble=!0,a.returnValue=!1,b(),!1)});var c=5;initial_data&&initial_data.update_frequency&&initial_data.update_frequency.product>0&&(c=initial_data.update_frequency.product),setInterval(function(){b()},1e3*c),$(document).on("ticket-added",function(a,c){f.val(c[tags.symbol]),b()}),e.translate()}}function b(){var a=f.val();a&&$.get("/iTrader/product?symbol="+a,function(a){var b=a.data,g=f.val(),h=initial_data.views.trade.price.exchanges;b&&g===b[0]&&h.indexOf(b[20])>=0?(d=b,$("#price-update-time").text(moment().format("MM/DD/YYYY HH:mm:ss")),e.find("[data-tag]").each(function(){$(this).text(b[$(this).attr("data-tag")]||"--"),"symbolName"===$(this).attr("data-tag")&&$(this).attr("title",b[$(this).attr("data-tag")]||"")}),e.format(),e.find("[data-format=price]").each(function(){$(this).text(getDisplayPrice($(this).text(),"market",b))})):c()})}function c(){d=null,$("#price-update-time").text("--"),e.find("[data-tag]").each(function(){"symbolName"===$(this).attr("data-tag")?($(this).text(messages.ticket_message_invalid_symbol.text),$(this).attr("title","")):$(this).text("--")})}var d,e,f;exports.init=a});